@model WEB.Areas.Dashboard.ViewModels.ProductPhotoViewModel
@{
    Layout = "_Layout";
    string appLocale = System.Threading.Thread.CurrentThread.CurrentCulture.Name;
}

<!-- Content Header (Page header) -->
    <div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1 class="m-0 text-dark">@Localizer["productsphotos"]</h1>
          </div><!-- /.col -->
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-@(appLocale == "ar" ? "left" : "right")">
              <li class="breadcrumb-item"><a asp-action="Index" asp-controller="Dashboard" asp-area="Dashboard">@Localizer["dashboard"]</a></li>
              <li class="breadcrumb-item"><a asp-action="Index" asp-controller="Products" asp-area="Dashboard">@Localizer["products"]</a></li>
              <li class="breadcrumb-item active">@Localizer["create"]</li>
            </ol>
          </div><!-- /.col -->
        </div><!-- /.row -->
      </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->

    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
        <div class="row">
                  <!-- left column -->
                  <div class="col-md-12">
                    <!-- general form elements -->
                    <div class="card">
                      <!-- /.card-header -->
                      <!-- form start -->
                        <div class="card-header">
                          <form asp-action="Create" asp-controller="ProductsPhoto" asp-area="Dashboard" method="post" role="form" enctype="multipart/form-data">
                            <div class="row">
                              <div class="col-lg-6 form-group">
                                <label for="">@Localizer["design_photo"]</label>
                                <input type="hidden" asp-for="Id">
                                <input type="file" class="form-control" asp-for="Photo">
                                <span asp-validation-for="Photo" class="text-danger"></span>
                              </div>
                              <div class="col-lg-1 form-group"> 
                                <label for="" style="visibility: hidden;">d</label>
                                <button class="btn btn-success"><i class="fa fa-plus"></i> @Localizer["save_design"]</button>
                              </div>
                              @if (Model.OldPhoto != "default.jpg")
                              {
                                <div class="col-lg-1 form-group"> 
                                  <label for="" style="visibility: hidden;">d</label>
                                  <br/>
                                  <a class="btn btn-default" target="_blank" href="~/dashboard/uploads/products/@Model.OldPhoto"><i class="fa fa-image"></i> </a>
                                </div>
                              }
                            </div>
                          </form>
                        </div>
                      <div class="card-body">
                        <span asp-validation-summary="All"></span>
                            <div class="card-body" style="height: 55rem; direction: ltr;text-align: left">
                              <div id="tui-image-editor-container"></div>
                            </div><!-- /.card-body -->
                      </div>
                    </div>
                    <!-- /.card -->
                  </div>
                  <!--/.col (left) -->
                </div>
      </div>
    </section>
<!-- /.content -->

@section css
{
  <link type="text/css" href="https://uicdn.toast.com/tui-color-picker/v2.2.6/tui-color-picker.css" rel="stylesheet"/>
  <link rel="stylesheet" href="~/dashboard/dist/image-editor/tui-image-editor.css"/>
}

@section js
{
  <script
    type="text/javascript"
    src="https://api-storage.cloud.toast.com/v1/AUTH_e18353c4ea5746c097143946d0644e61/toast-ui-cdn/tui-image-editor/v3.11.0/example/fabric-v4.2.0.js"></script>
  <script
    type="text/javascript"
    src="https://uicdn.toast.com/tui.code-snippet/v1.5.0/tui-code-snippet.min.js"></script>
  <script
    type="text/javascript"
    src="https://uicdn.toast.com/tui-color-picker/v2.2.6/tui-color-picker.js"></script>
  <script
    type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.3/FileSaver.min.js"></script>
  <script src="~/dashboard/dist/image-editor/tui-image-editor.js"></script>
  <script type="text/javascript" src="~/dashboard/dist/image-editor/theme/white-theme.js"></script>
  <script type="text/javascript" src="~/dashboard/dist/image-editor/theme/black-theme.js"></script>
  <script>
            // Image editor
            let imageEditor = new tui.ImageEditor('#tui-image-editor-container', {
              includeUI: {
                loadImage: {
                  path: '@Url.Content("~/dashboard/uploads/categories/"+@Model.CategoryPhoto)',
                  name: 'MyLogo',
                },
                theme: blackTheme, // or whiteTheme
                initMenu: 'filter',
                menuBarPosition: 'bottom',
              },
              cssMaxWidth: 1200,
              cssMaxHeight: 900,
              usageStatistics: false,
            });
            window.onresize = function () {
              imageEditor.ui.resizeEditor();
            };
          </script>
}